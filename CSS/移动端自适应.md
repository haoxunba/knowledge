# 移动端自适应

## DPR

什么是 DPR？
我们知道在 Chrome 浏览器控制台 console 中输入`window.devicePixelRatio`
可以获取当前屏幕的 DPR。

那么什么是 DPR (Device Pixel Ratio)？这里不妨先给它个定义：window.devicePixelRatio 是设备上物理像素 (physical pixels) 和设备无关像素 (device-independent pixels (dips)) 的比例。公式表示就是：window.devicePixelRatio = physical pixels / dips

这个定义里的 dips 并不太好理解，现在我们尝试通过下面几点来搞明白：

- 首先，dips 是一种度量单位
- 然后，要知道浏览器并不是根据物理硬件的像素来工作的，而是根据 dips 宽度来工作。
- 最后，还要知道 dips 是将像素值与实际距离联系起来的，不管屏幕的像素密度是多少，dips 为 1px，那么实际宽度就是 1px，也就是对应 CSS 中的 1px，而不是对应物理像素 1px。

这里我们就可以看到，1px 并不总是等于 1px。

下面这个例子非常重要

    搞明白 dips，我们举个简单例子，MacBook Pro 13.3 英寸的显示器分辨率是 2560 x 1600，这个 2560px 就是我们前面说的设备上的物理像素值，而浏览器全屏显示的宽度只有 1280px，这个就是 dips 值，最终可以知道这台 MacBook Pro 电脑屏幕的 DPR 为 2，DPR 在这里所表达的意思就是：1280 dips 在实际显示的时候，被硬件扩展到了 2560 的硬件像素宽度，2 个物理像素对应 1 个 CSS 像素（这个指的水平方向或垂直方向，如果在一个平面内的话 4 个物理像素点对应 1 个 CSS 像素点）。

    如果现在上面这台电脑里有一张实际宽度为 200px 的高清图片，在浏览器里被 css 设置宽度为 200px，那么这张图片看起来就会有点模糊，因为它实际被硬件扩展到了 400px 的硬件像素宽度，是它实际宽度的两倍。但是，如果它被 css 设置宽度为 100px，这时候它实际被硬件扩展到了 200px 的硬件像素宽度，和它实际像素一致，就不会模糊了。

根据上面案例可以理解到，一般设计图是640px或者750px，但是设备的dips是320px或375px，所以我们在设置样式的时候会将设计图除以2，得到需要操作的css像素